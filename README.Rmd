---
output: github_document
always_allow_html: true
---

# Parallel Policy Tree

An R / Rust Package to implement a parallelized exhaustive tree search for
policy-learning. Aims to extend and speed up work done with the `policytree`
package.

# Usage

There's just one function, `parallel_policy_tree()`. Use it just as you would the
`policy_tree()` function from the `policytree` package, and enjoy the parallelized speed!

Trees aren't guaranteed to be exactly the same as those produced by
`policytree` in that some leaves may be left unpruned (working on this), but
they should give the same predictions.

```{r setup, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>",
  fig.path = "man/figures/README-",
  out.width = "100%"
)
library(parallelpolicytree)
library(policytree)
```

```{r}

n <- 400
p <- 4
d <- 3
depth <- 2
# Classification task taken from policytree tests
# Continuous X
X <- round(matrix(rnorm(n * p), n, p),2)
colnames(X) <- letters[1:ncol(X)]
Y <- matrix(0, n, d)
best.tree <- policytree:::make_tree(X, depth = depth, d = d)
best.action <- policytree:::predict_test_tree(best.tree, X)
Y[cbind(1:n, best.action)] <- 100 * runif(n)
best.reward <- sum(Y[cbind(1:n, best.action)])

tree <- parallel_policy_tree(X,Y,2)

tree

```

# Installation

## Installing Rust:

You must have [Rust](https://www.rust-lang.org/tools/install) installed to
compile this package. The rust website provides an excellent installation
script that has never caused me any issues.

On Linux, you can install Rust with:

```{sh, eval=F}
curl --proto '=https' --tlsv1.2 -sSf https://sh.rustup.rs | sh
```

On Windows, I use the rust installation wizard, found
[here](https://forge.rust-lang.org/infra/other-installation-methods.html).

Once you install rust, you should be able to install the package with:

```{r, eval=F}
devtools::install_github("Yale-Medicaid/parallel_policy_tree")
```
